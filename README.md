# Smart-Drawer
Smart-Drawer with Stepper motor interfacing AVR MicroController &amp; Ultrasonic Sensor

#### Ultrasonic Sensor
- For this project, we used HC-SR04 ultra sonic sensor.
<br>Ultrasonic sensors (or transducers) work similarly to radar systems. Acoustic waves are generated by ultrasonic sensors when electrical energy is converted into them. The acoustic wave signal is an ultrasonic wave traveling at a frequency above 18kHz. The famous HC SR04 ultrasonic sensor generates ultrasonic waves at 40kHz frequency.
<br> Typically, a microcontroller is used for communication with an ultrasonic sensor. We used ATmega16 AVR microcontroller in this case. To begin measuring the distance, the microcontroller sends a trigger signal to the ultrasonic sensor. The duty cycle of this trigger signal is 10ÂµS for the HC-SR04 ultrasonic sensor. When triggered, the ultrasonic sensor generates eight acoustic (ultrasonic) wave bursts and initiates a time counter. As soon as the reflected (echo) signal is received, the timer stops. The output of the ultrasonic sensor is a high pulse with the same duration as the time difference between transmitted ultrasonic bursts and the received echo signal.

<br> ![hc-sr04](https://user-images.githubusercontent.com/47887796/182787238-3abde9bc-c56c-4752-8739-b8b54be96aa1.png)
<br> ![Figure-2](https://user-images.githubusercontent.com/47887796/182788257-ed91de5a-b888-429a-900a-bd455d68451f.png)

- For the code, we have to enable intrupt and write a function to measure distance:
``` long timer = 0, xTimer = 0;
float pulsa, distance;
// Timer1 overflow interrupt service routine
interrupt [TIM1_OVF] void timer1_ovf_isr(void)
{
   xTimer++;
}

void ultra() {
   TRIGGER = 1;         
   delay_us(10);
   TRIGGER = 0;
   while(ECHO == 0);    
   TCNT1 = 0;           
   xTimer = 0;          
   while(ECHO == 1);    
   timer = TCNT1;      
   pulsa = (float)xTimer * 65535 * 0.5 + (float)timer * 0.5;   
   distance = pulsa / 29.034 / 2;   
}
